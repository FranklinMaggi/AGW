####################################
# BASE CONFIG (usata da tutti gli env)
####################################
name = "agw"
main = "workers/api.js"
compatibility_date = "2024-11-22"

routes = [
  { pattern = "agw-api.webonday.it", custom_domain = true }
]

####################################
# SHARED KV + VARS (ereditarie)
####################################
# KV in comune (stessa namespace per tutti)
[[kv_namespaces]]
binding = "AGW_USERS"
id = "532cf4782eb64b129f9493c787939222"
preview_id = "499129c872bb4654a337592974e0da56"

# Variabili condivise
[vars]
ADMIN_TOKEN = "agw-secret-admin-token"


####################################
# ENV: PRODUCTION
####################################
[env.production]
name = "agw-production"
compatibility_date = "2024-11-22"

# KV per ambiente production (IDENTICO come richiesto)
[[env.production.kv_namespaces]]
binding = "AGW_USERS"
id = "532cf4782eb64b129f9493c787939222"

# Vars aggiuntive ONLY production
[env.production.vars]
ADMIN_TOKEN = "agw-secret-admin-token"
PUBLIC_API_URL = "https://agw-api.webonday.it"
PUBLIC_APP_URL = "https://agw.webonday.it"


####################################
# ENV: DEV
####################################
[env.dev]

[[env.dev.kv_namespaces]]
binding = "AGW_USERS"
preview_id = "499129c872bb4654a337592974e0da56"

[env.dev.vars]
ADMIN_TOKEN = "agw-secret-admin-token"
PUBLIC_API_URL = "http://127.0.0.1:8787"
PUBLIC_APP_URL = "http://localhost:3000"
